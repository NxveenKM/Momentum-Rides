<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Management - Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'><g transform='translate(25, 25)'><circle cx='0' cy='0' r='22' stroke='%230D1B2A' stroke-width='4' fill='none'/><line x1='0' y1='-22' x2='0' y2='-8' stroke='%230D1B2A' stroke-width='4' stroke-linecap='round'/><line x1='-19.05' y1='11' x2='-6.9' y2='4' stroke='%230D1B2A' stroke-width='4' stroke-linecap='round'/><line x1='19.05' y1='11' x2='6.9' y2='4' stroke='%230D1B2A' stroke-width='4' stroke-linecap='round'/><circle cx='0' cy='0' r='5' fill='%231E90FF'/></g></svg>">
</head>
<body>
    <header class="header scrolled">
        <nav class="navbar">
            <a href="index.html" class="nav-logo" style="display: flex; align-items: center;">
                <svg width="240" height="40" viewBox="0 0 300 50" xmlns="http://www.w3.org/2000/svg">
                    <!-- Icon: Steering Wheel -->
                    <g transform="translate(25, 25)">
                        <circle cx="0" cy="0" r="22" stroke="white" stroke-width="3" fill="none"/>
                        <line x1="0" y1="-22" x2="0" y2="-8" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <line x1="-19.05" y1="11" x2="-6.9" y2="4" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <line x1="19.05" y1="11" x2="6.9" y2="4" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <circle cx="0" cy="0" r="5" fill="#FF7F50"/>
                    </g>
                    <!-- Text: Momentum Rides -->
                    <text x="60" y="35" font-family="Poppins, sans-serif" font-size="24" font-weight="600" fill="white">
                        Momentum Rides
                    </text>
                </svg>
            </a>
            <div class="nav-admin-title">Fleet Management</div>
            <div>
                <a href="admin.html" class="nav-cta-secondary">View Bookings</a>
                <button id="logout-button" class="nav-cta">Logout</button>
            </div>
        </nav>
    </header>

    <main class="page-container">
        <div class="admin-header">
            <h1 class="page-title">Manage Your Fleet</h1>
            <!-- The button has been moved from here -->
        </div>
        
        <div class="admin-table-container">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Car Name</th>
                        <th>Type</th>
                        <th>Price/Day</th>
                        <th>Stock</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="cars-tbody">
                    <tr><td colspan="6" class="loading-row">Loading fleet...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- === FLOATING ACTION BUTTON MOVED HERE === -->
        <button id="add-car-btn" class="fab" title="Add New Car">
            <i class="fas fa-plus"></i>
        </button>
    </main>

    <!-- Modal for Adding/Editing a Car -->
    <div id="car-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 id="modal-title">Add New Car</h2>
            <form id="car-form">
                <input type="hidden" id="car-db-id" name="_id">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="car-id">ID</label>
                        <input type="number" id="car-id" required>
                    </div>
                    <div class="form-group">
                        <label for="car-name">Car Name</label>
                        <input type="text" id="car-name" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="car-type-select">Type</label>
                        <select id="car-type-select" required>
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group" id="new-car-type-group" style="display: none;">
                        <label for="car-type-new">New Car Type</label>
                        <input type="text" id="car-type-new">
                    </div>
                    <div class="form-group">
                        <label for="car-price">Price per Day (â‚¹)</label>
                        <input type="number" id="car-price" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="car-passengers">Passengers</label>
                        <input type="number" id="car-passengers" required>
                    </div>
                    <div class="form-group">
                        <label for="car-luggage">Luggage</label>
                        <input type="number" id="car-luggage" required>
                    </div>
                </div>
                 <div class="form-row">
                    <div class="form-group">
                        <label for="car-transmission">Transmission</label>
                        <select id="car-transmission" required>
                            <option value="Automatic">Automatic</option>
                            <option value="Manual">Manual</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="car-stock">Stock</label>
                        <input type="number" id="car-stock" required min="0" value="1">
                    </div>
                 </div>
                <div class="form-group">
                    <label for="car-image">Image URL</label>
                    <input type="url" id="car-image" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancel-btn" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary-full">Save Car</button>
                </div>
            </form>
        </div>
    </div>

    <script src="fleet-management.js"></script>
</body>
</html>